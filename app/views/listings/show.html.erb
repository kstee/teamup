<p>
  <strong>Description:</strong>
    <%= @listing.description %>
</p>

<p>
  <strong>Datetime:</strong>
    <%= @listing.listing_datetime %>
</p>

<p>
  <strong>Pax existing:</strong>
    <%= @listing.pax_existing %>
</p>

<p>
  <strong>Pax required:</strong>
    <%= @listing.pax_needed %>
</p>


<p>
  <strong>Status:</strong>
    <%= @listing.status %>
</p>

<p>
  <strong>Address:</strong>
    <%= @listing.address %>
</p>

<p>
  <strong>Coordinates:</strong>
  <%= @listing.latitude %> <%= @listing.longitude %>
</p>

<p>
  <strong>Longitude:</strong>
    <%= @listing.longitude %>
</p>

<p>
  <strong>Latitude:</strong>
    <%= @listing.latitude %>
</p>

<%= image_tag "http://maps.googleapis.com/maps/api/staticmap?center=#{@listing.latitude},#{@listing.longitude}&markers=#{@listing.latitude},#{@listing.longitude}&zoom=7&size=640x400&key=AIzaSyA4BHW3txEdqfxzdTlPwaHsYRSZbfeIcd8",
              class: 'img-fluid img-rounded', alt: "#{@listing.description} on the map"%>

<p>
  <strong>Host:</strong>
    <%= link_to @listing.user.name, @listing.user %>
</p>

<p>
  <% if @teammates.any? %>
    <strong>
      <%= pluralize(@teammates.count, "Participant") %> 
    </strong>

    <ul>
      <% @teammates.each do |teammate| %>
        <li><%= link_to teammate.user.name, teammate.user %></li>
      <%end%>
    </ul>
  <%end%>
</p>

<%= form_for(@user_listing, :url => listing_user_listings_path(@listing)) do |form| %>
  <%= form.submit @listing.requested?(current_user.id) ? "Join request sent" : "Join" %>
<%end%>

<%= link_to "Edit", edit_listing_path(@listing)%>
<%= link_to "Delete", listing_path(@listing), method: :delete, data: {confirm: 'Are you sure?'} %>
<%= link_to "Back", listings_path%>




<div style='width: 800px;'>
  <div id="map" style='width: 800px; height: 400px;'></div>
</div>

<script type="text/javascript">
  handler = Gmaps.build('Google');
  handler.buildMap(
    {
      provider: {
        disableDefaultUI: true
        // here you can pass other Google Maps API options here
      },
      internal: {
        id: 'map'
      }
    },
    function() {
      markers = handler.addMarkers([
        {
          "lat": <%= @listing.latitude %>,
          "lng": <%= @listing.longitude %>,
          "picture": {
            "url": "https://addons.cdn.mozilla.net/img/uploads/addon_icons/13/13028-64.png",
            "width":  36,
            "height": 36
          },
          "infowindow": "hello!"
        }
      ]);
      handler.bounds.extendWith(markers);
      handler.fitMapToBounds();
    }
  );
</script>